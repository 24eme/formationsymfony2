<?php

namespace AppBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * PronosticRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class PronosticRepository extends EntityRepository
{
  public function getPronosticEncours(){
    $this->getEntityManager()->createQuery("
      SELECT p,r
      FROM \AppBundle\Entity\Pronostic p
      JOIN p.rencontre r
      WHERE r.date > :date
      ORDER BY r.date DESC
      "
      )->setParametres('date', date('d/m/Y'));
      return $query->getResult();
  }
}
